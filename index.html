<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–£—á—ë—Ç –ø—Ä–æ–¥—É–∫—Ü–∏–∏</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#1976d2">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>üì¶ –£—á—ë—Ç –ø—Ä–æ–¥—É–∫—Ü–∏–∏</h1>
    <div id="month-total">0 ‚ÇΩ</div>
    <div id="sync-status">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>
  </header>

  <main>
    <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ -->
    <section id="add-section">
      <h2>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</h2>

      <label>–¢–æ–≤–∞—Ä:</label>
      <select id="product-select">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä</option>
      </select>

      <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
      <input type="number" id="qty-input" min="0" step="0.1" placeholder="1.0">
      <div id="qty-quick-btns" style="display: flex; flex-wrap: wrap; gap: 6px; margin: 8px 0;"></div>
      <button type="button" id="voice-btn">üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞</button>

      <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
      <input type="text" id="comment-input" autocomplete="off" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
      <div id="comment-suggest" style="position:relative;"></div>

      <button id="add-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
      <button id="add-shift-btn" type="button">–î–æ–±–∞–≤–∏—Ç—å —Å–º–µ–Ω—É (8 —á.)</button>

      <h3>–°–µ–≥–æ–¥–Ω—è</h3>
      <ul id="today-list"></ul>
    </section>

    <!-- –¢–æ–≤–∞—Ä—ã -->
    <section id="products-section" hidden>
      <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h2>
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
      <input type="text" id="new-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
      <label>–¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É:</label>
      <input type="number" id="new-price" step="0.01" min="0.01" placeholder="100.00">
      <button id="add-product-btn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
      <h3>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h3>
      <ul id="product-list"></ul>
    </section>

    <!-- –û—Ç—á—ë—Ç—ã -->
    <section id="reports-section" hidden>
      <h2>–û—Ç—á—ë—Ç—ã</h2>

      <div class="stats-card">
        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</h3>
        <div class="stat-item"><span>–û–±—â–∞—è —Å—É–º–º–∞:</span><span id="month-sum">0 ‚ÇΩ</span></div>
        <div class="stat-item"><span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π:</span><span id="month-count">0</span></div>
      </div>

      <div class="stats-card">
        <h3>–ó–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ –º–µ—Å—è—Ü</h3>
        <div class="stat-item"><span>–°—É–º–º–∞ —Å–¥–µ–ª–∫–∏:</span><span id="month-sum">0 ‚ÇΩ</span></div>
        <div class="stat-item"><span>–û–∫–ª–∞–¥:</span><span id="salary-sum">0 ‚ÇΩ</span></div>
        <div class="stat-item"><span>–ê–≤–∞–Ω—Å:</span><span id="advance-sum">0 ‚ÇΩ</span></div>
        <div class="stat-item"><span>–°—É–º–º–∞ –Ω–∞–ª–æ–≥–∞:</span><span id="tax-sum">0 ‚ÇΩ</span></div>
        <div class="stat-item"><span>–ü—Ä–æ—Ü–µ–Ω—Ç –Ω–∞–ª–æ–≥–∞:</span><span id="tax-pct">13%</span></div>
        <div class="stat-item"><b>–ò—Ç–æ–≥–æ –Ω–∞ —Ä—É–∫–∏:</b><span id="netto-sum">0 ‚ÇΩ</span></div>
      </div>

      <div class="stats-card">
        <h3>–£—á—ë—Ç —Å–º–µ–Ω/—á–∞—Å–æ–≤</h3>
        <div class="stat-item"><span>–°–º–µ–Ω –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ:</span><span id="shifts-count">0</span></div>
        <div class="stat-item"><span>–ß–∞—Å–æ–≤ –≤—Å–µ–≥–æ:</span><span id="shifts-hours">0</span></div>
        <div class="stat-item"><span>–°—Ä–µ–¥–Ω–µ–µ –∑–∞ —Å–º–µ–Ω—É:</span><span id="shifts-avg">0 ‚ÇΩ</span></div>
        <div class="stat-item"><span>–°—Ä–µ–¥–Ω–µ–µ –∑–∞ —á–∞—Å:</span><span id="hour-avg">0 ‚ÇΩ</span></div>
      </div>

      <div class="stats-card">
        <h3>–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3>
        <canvas id="product-chart" height="220"></canvas>
      </div>

      <div class="stats-card">
        <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π</h3>
        <ul id="recent-list"></ul>
      </div>
    </section>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <section id="settings-section" hidden>
      <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>

      <div class="stats-card">
        <h3>–î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
        <div class="stat-item"><span>–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤:</span><span id="total-products">0</span></div>
        <div class="stat-item"><span>–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:</span><span id="total-entries">0</span></div>
      </div>

      <h3>–í—ã–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h3>
      <button id="export-btn">–≠–∫—Å–ø–æ—Ä—Ç –≤ JSON</button>
      <button id="export-csv-btn">–í—ã–≥—Ä—É–∑–∏—Ç—å –≤ CSV (Excel)</button>
      
      <label for="export-period">–ü–µ—Ä–∏–æ–¥:</label>
      <select id="export-period">
        <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
        <option value="week">–ù–µ–¥–µ–ª—è (—Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞)</option>
        <option value="month">–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</option>
        <option value="year">–ì–æ–¥</option>
        <option value="custom">–ó–∞–¥–∞—Ç—å –ø–µ—Ä–∏–æ–¥</option>
      </select>
      <div id="custom-period" style="display: none; margin-top: 8px;">
        <input type="date" id="date-from"> ‚Äî
        <input type="date" id="date-to">
      </div>
      <button id="export-html-btn">–í—ã–≥—Ä—É–∑–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É (HTML)</button>
      
      <button id="clear-data-btn">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>

      <h3>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</h3>
      <label><input type="checkbox" id="show-add" checked> –ü–æ–∫–∞–∑–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å"</label><br>
      <label><input type="checkbox" id="show-products" checked> –ü–æ–∫–∞–∑–∞—Ç—å "–¢–æ–≤–∞—Ä—ã"</label><br>
      <label><input type="checkbox" id="show-reports" checked> –ü–æ–∫–∞–∑–∞—Ç—å "–û—Ç—á—ë—Ç—ã"</label><br>
      <label><input type="checkbox" id="show-settings" checked> –ü–æ–∫–∞–∑–∞—Ç—å "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"</label><br>
      <button id="save-ui-prefs-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</button>

      <label><input type="checkbox" id="one-hand-mode"> –†–µ–∂–∏–º –¥–ª—è –æ–¥–Ω–æ–π —Ä—É–∫–∏</label>
      <button id="save-one-hand-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∂–∏–º</button>

      <h3>–ë—ã—Å—Ç—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞</h3>
      <input type="text" id="qty-presets" placeholder="10,20,50,100,200">
      <small>–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: 10,20,50...</small>
      <button id="save-qty-presets-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è</button>

      <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h3>
      <label>–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:</label>
      <select id="theme-select">
        <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
        <option value="dark">–¢—ë–º–Ω–∞—è</option>
      </select>
      <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç:</label>
      <div id="color-palette" style="display:flex; gap:8px; margin:6px 0;"></div>
      <input type="color" id="custom-color" style="margin-top:6px;">
      <button id="save-theme-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>

      <h3>–ó–∞—Ä–ø–ª–∞—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
      <label>–û–∫–ª–∞–¥:</label>
      <input type="number" id="salary-salary" placeholder="–û–∫–ª–∞–¥, —Ä—É–±.">
      <label>–ê–≤–∞–Ω—Å:</label>
      <input type="number" id="salary-advance" placeholder="–ê–≤–∞–Ω—Å, —Ä—É–±.">
      <label>–ù–∞–ª–æ–≥ (%):</label>
      <input type="number" id="salary-tax" placeholder="13">
      <button id="save-salary-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ó–ü-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>

      <h3>–£—á—ë—Ç —Å–º–µ–Ω</h3>
      <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–π —Å–º–µ–Ω—ã (—á–∞—Å–æ–≤):</label>
      <input type="number" id="shift-hours" min="1" step="1" value="8">
      <button id="save-shift-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–º–µ–Ω—É</button>
      <button id="clear-shift-stats-btn">–°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–º–µ–Ω</button>
    </section>
  </main>

  <nav>
    <button data-page="add-section" data-active>üìù</button>
    <button data-page="products-section">üì¶</button>
    <button data-page="reports-section">üìä</button>
    <button data-page="settings-section">‚öôÔ∏è</button>
  </nav>

  <script src="app.js"></script>
</body>
</html>
